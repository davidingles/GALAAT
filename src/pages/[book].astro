---
import { books } from "../data/books.js";
import Layout from "../layouts/Layout.astro";
import ListOfBooks from "../components/book/ListOfBooks.astro";
import ObtenerComponenteJsx from "../components/book/ObtenerComponenteJsx.astro";
import BtnEstrellas from "../components/botones-sliders/BtnEstrellas.astro";

const { book } = Astro.params;
const bookData = books.find((b) => b.id === book);
if (!bookData) {
    return Astro.redirect("/404")
}

// ESTA FUNCION DE callGetStaticPaths() ES NECESARIA PARA HACER EL BUILD
// ========================================================================
export function getStaticPaths() {
  return [
    {params: {book: "B1Cerrada"}},
    {params: {book: "BandejaAacotada"}},
    {params: {book: "EstucheConAsas"}},
    {params: {book: "ExpositorDM"}},  ]
}
---

<Layout>

<main class="flex flex-col justify-center items-center">
    <a id="a" href="" class="flex flex-row">
        <BtnEstrellas>
                    <div class="">
                <svg
                    width="32" height="32" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                    <path d="M20 5a2 2 0 0 1 1.995 1.85l.005 .15v10a2 2 0 0 1 -1.85 1.995l-.15 .005h-11a1 1 0 0 1 -.608 -.206l-.1 -.087l-5.037 -5.04c-.809 -.904 -.847 -2.25 -.083 -3.23l.12 -.144l5 -5a1 1 0 0 1 .577 -.284l.131 -.009h11zm-7.489 4.14a1 1 0 0 0 -1.301 1.473l.083 .094l1.292 1.293l-1.292 1.293l-.083 .094a1 1 0 0 0 1.403 1.403l.094 -.083l1.293 -1.292l1.293 1.292l.094 .083a1 1 0 0 0 1.403 -1.403l-.083 -.094l-1.292 -1.293l1.292 -1.293l.083 -.094a1 1 0 0 0 -1.403 -1.403l-.094 .083l-1.293 1.292l-1.293 -1.292l-.094 -.083l-.102 -.07z" stroke-width="0" fill="black"></path>
                 </svg>
            </div>
        </BtnEstrellas>
        <div class="mb-24 text-3xl">
            <h1>{bookData.title}</h1>
        </div>
    </a href="" id="btn">
    <div class="flex flex-col md:flex-row justify-center content-between">
        <div class="w-1/3 rounded-2xl border-8"><img class="w-full h-full object-contain" src={bookData.img} alt=""></div>
        <div class="w-1/3"><ObtenerComponenteJsx ancho="w-full h-full" componente_jsx={bookData.three} /></div>
    </div>
</main>

</Layout>

<script>
    const btn = document.getElementById('btn');
    const a = document.getElementById('a');
    btn.addEventListener("click", () => {
        console.log("click");
        a.href = "/catalogo"

    });
</script>